## 너의 사연은? :  곡간의 유사도에 따른 재생 목록 편성및 사연의 감정 분석 기반 추천곡 및 신청곡 서비스

<br/> <br/> <br/>

## 1. 소개

**(현재 AWS 서버 비용 문제로 배포는 하지 않은 상태입니다.)**

### (참고 : 전체 프로젝트 소개는 백엔드 저장소에서 작성하겠습니다.)

### [Frontend 저장소 방문하기(기여도 20%)](https://github.com/MeanOfRedStone/Music-Frontend)
### [AI 모델 API 저장소 방문하기(기여도 100%)](https://github.com/MeanOfRedStone/modelTest)
### [AI 모델 생성 저장소 방문하기(기여도 50%)](https://github.com/MeanOfRedStone/AIForFinalProject)


### 1) 프로젝트 화면

* **홈 화면**
<div align="center">
<img src="https://github.com/MeanOfRedStone/story-backend/assets/128448869/8dd4e07b-69c4-41ce-98a0-5351ac93755f" width="220" height="400" />

<img src="https://github.com/MeanOfRedStone/story-backend/assets/128448869/fd63749e-2dae-42e4-b8ce-d479f2f07267" width="220" height="400" />

<img src="https://github.com/MeanOfRedStone/story-backend/assets/128448869/32d6eea8-6984-418d-a9cc-daf876f95155" width="220" height="400" />
</div>

<br/>

* **주요 기능 화면(사연 신청 및 신정곡 배치)**
<div align="center">
<img src="https://github.com/MeanOfRedStone/story-backend/assets/128448869/ace1fd5a-4196-458e-8b10-c1737c356350" width="220" height="400" />

<img src="https://github.com/MeanOfRedStone/story-backend/assets/128448869/678b1751-47c9-4c8e-b8e7-959f041470ca" width="220" height="400" />

<img src="https://github.com/MeanOfRedStone/story-backend/assets/128448869/956edf9e-15f4-46f6-a862-ab0394bddd0a" width="220" height="400" />

<img src="https://github.com/MeanOfRedStone/story-backend/assets/128448869/f3926051-9296-41d9-9cec-ce3f3e508d67" width="220" height="400" />

<img src="https://github.com/MeanOfRedStone/story-backend/assets/128448869/ada3d85e-d8fd-4d86-9ffc-56b85fcfe20d" width="220" height="400" />

<img src="https://github.com/MeanOfRedStone/story-backend/assets/128448869/fc962bff-fb8f-4d52-8ddf-bc7ee82b9675" width="220" height="400" />
<br/>

**<사연 신청 및 신정곡 배치>**
</div>

<br/>

* **주요 기능 화면(가게, 개인 신청곡 누적 데이터 화면)**
<div align="center">
<img src="https://github.com/MeanOfRedStone/story-backend/assets/128448869/93a32926-9a79-4844-8ac3-3349b2a6b25c" width="220" height="400" />

<img src="https://github.com/MeanOfRedStone/story-backend/assets/128448869/0f566165-b2fe-4896-bdcc-a061a7667422" width="220" height="400" />


<br/>

**<가게, 개인 신청곡 누적 데이터 화면>**
</div>

<br/> <br/> <br/>

## 2. 프로젝트 설명

### 1)개요
* 진행 기간: 2023.06.28 ~ 2023.08.08
* 개발 인원 : 6명
* 개발 환경

(1) 언어
- Java, Python
- HTML/CSS/Javascript

(2) 프레임워크
- 스프링부트
- React
- Django
- Django REST

(3) IDE
- IntelliJ
- Visual Studio
- Pycharm
- Colab

(4) 담당부분(기여도%)
- AI 모델 생성: 50%
- AI 모델API 생성 : 100%
- Frontend : 20%
<br/>

### 2)제작 과정
#### (1) 서비스 기획
&ensp; 음악을 속에서 서로 이야기할 수 있는 공간을 형성하는 커뮤니티 서비스를 목표합니다. 프로젝트는 크게 2가지 기능을 토대로 만들었습니다. (1) 신청곡을 자동으로 배치해주는 기능, (2) 사연을 공유하여 서로 소통하는 공간을 형성하는 것이 그것입니다. 주요 서비스 타겟은 (1) 음악을 재생하는 카페, 바 등의 점주 (2) 해당 점포의 손님입니다. 주요 기능을 통해 서비스 타겟 중 하나인 점주는 자동으로 점포의 음악을 배치해 음악을 선정하는 시간을 줄이고 손님은 사연 공유를 통해 다른 고객과 소통하며 좋아하는 음악을 즐길 수 있습니다.

<br/>

&ensp; 이번 프로젝트의 시작은  수요 조사 후 인터뷰를 통해 필요성을 확인했습니다. 서비스 대상인 점주,  가게의 손님 각각 신청곡을 받기 어렵다, 처음보는 사람과 대화하기 어렵다라는 문제를 제기했습니다. 인터뷰에 응답해주신 점주들은 실제로는 신청곡을 받지 않는다고 하였습니다. 하지만 손님의 신청을 통해 자동으로 플레이리스트를 생성하는 서비스를 필요하다고 느끼는 이유가 궁금했습니다.

<br/>

&ensp; 먼저 곡 신청을 받지 않는 이유는 순서대로 신청곡을 받으면 곡이 주는 느낌이 일정하지 않아 가게의 분위기를 해치기 때문입니다. 실제로 음악은 가게 고유한 분위기 형성에 많은 영향을 미치고 이는 매출을 결정한다고 하였습니다. 따라서 점주들은 가게 분위기에 맞추어 재생 목록을 만드는 데 많은 시간을 할애한다고 답했습니다. 따라서 적절한 신청곡을 자동으로 배치해주는 서비스가 생긴다면 재생 목록을 만드는 시간을 줄여 이를 통해 효율적인 가게 운영이 가능할 것이라 예상했습니다.

<br/>

&ensp; 다음으로 서비스의 두번째 고객인 가게 손님들과도 인터뷰를 진행했습니다. 가게 손님들은 가끔씩은 다른 손님들과 조금더 편하게 얘기해보고싶다는 아쉬움을 토로했습니다.
하지만 이야기를 시작하는 것은 힘든데 그 이유는 아무래도 낯선 사람에게 무턱대고 말하기 쉽지 않고 주제선정이 힘들기 때문입니다. 따라서 쉽게 얘기를 꺼내기 힘든다는 문제점을 해결해준다면. 온라인에서 익명을 통해 이야기를 시작할 수 있다면 더 쉽게 대화가 가능할 것이라고 생각했습니다.

<br/>

&ensp; 다시 한번 위의 내용을 정리해보겠습니다. 앞서 점주들은 플레이리스트를 만들 때 가게와 어울리는 분위기의 음악을 유지하는 게 중요하다고 응답했습니다. 따라서 우리 서비스에서는 곡의 특성을 분석과 알고리즘을 통해 비슷한 신청곡끼리 어울리게 배치되도록 하였습니다. 두번 째로 점포 고객들은 가게에서 새로운 사람과 소통을 하고 싶다고 답했습니다. 우리 서비스에서는 해당 점포의 온라인 공간에서 사연을 공유할 수 있도록 했습니다. 이용자가 사연을 올리면 댓글을 통해 서로 소통할 수 있고 사연과 맞는 추천곡을 받을 수 있습니다.

<br/>
<br/>

#### (2) 요구사항 정리
- 사연을 올린다
- 사연과 플레이리스트 분위기에 맞게 음악 추천을 해준다 [N개의 추천 중 고르는 방식]
- 추천곡을 플레이 리스트에 추가하기
- 관리자 또한 음악을 추가할 수 있도록 하기
- 사연에 좋아요! 기능 추가하기
- 사연에 댓글 달 수 있도록 하기
- 기존에 신청했던 음악과 플레이리스트 기록
- 현재 재생곡을 알려준다
- 로그인 유저는 앱을 사용한다

#### (3) 분아별 필요한 작업

> 데이터
- 멜론 국내,팝(1070~2023년) 음악 데이터 수집 및 전처리
- 비지도학습 (K-means,  계측적 군집 분석 등)을 통한 음악 데이터 감성 분석
- 감정 데이터 수집

> AI
- 사연에 적혀있는 텍스트를 자연어 처리를 통하여 감성 분석을 하는 모델을 만든다. 이후 모델 통한 추천 음악 제공
- 영문 감성 분석 모델 (Bert)
- 한글 감성 분석 모델 (Ko-bert)

> 백엔드
- 사연, 댓글에 관한 백엔드 로직을 구성한다.
- 로그인 로직, 토큰 검증 로직을 구현한다.
- 람다와 Spring Boot, Django Rest 등을 사용하여 데이터를 요청하고, 응답할 수 있는 서버를 구성한다.
- 트래픽이 많을 것이라 예상되는 부분은 오토스케일링 그룹을 적용한 서버 구조로 하고, 데이터 크롤링 등 일정 시간 동작하고, 로그인/회원가입처럼 한번만 동작해야 하는 로직이 있다면 람다로 서버리스 구조로 설계한다.s

> 프론트엔드
- UX/UI 담당과 함께 화면을 구성하고, 백엔드 로직과 더불어 프론트엔드 로직을 구성한다.

> 클라우드
- GitHub 액션을 통해 GitHub에 태그가 되면 자동으로 Docker Image를 빌드하고, 빌드한 이미지를 docker hub에 push할 수 있도록 구성한다.
- 프론트엔드와 백엔드를 EKS를 통해 구성하여 오토스케일링이 가능하도록 하고, 오류가 나더라도 끊김없는 배포가 가능하도록 한다. Yaml파일을 사용하여 배포하여 쉬운 배포가 가능하도록 한다.클라우드 아키텍처를 설계하고 설계한 아키텍처의 단점, 보완 사항을 수시로 확인하며 개선한다.
- API Gateway에 서버 및 람다 메서드 들을 등록하고, 토큰을 받는 등 로그인 등을 적용한다 VPC-Link를 사용하여 프라이빗에 존재하는 EKS 서비스와 통신한다. 


 

